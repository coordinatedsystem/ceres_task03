# ceres_task03

简要介绍各文件夹的内容：
----------------------------------------------------------
resources:用来存放clone过来的TASK03资源文件以及为匹配格式由video.mp4转化的video_h264.mp4。

src:用来存放main函数代码文件。

     1.main.cpp：包含多种输出功能包括：检查配置，展示识别过程中的视频与相关数据，制作和输出可视化过程，分析误差。主要是利于调试。

     2.main2.cpp：撤去了多余测试功能，只保留了主干优化的功能，并增加了计时器对这段优化过程计算时间的功能。

output:用来存放main函数代码文件运行输出的三个视频：
     
     1. original_with_tracking.avi:将视频中的小球用hough圆检测算法标记出来圆的轮廓以及圆心。
     
     2. processed_blurred.avi：原视频进行灰度图转化与高斯滤波得到的用于识别圆的初加工视频。
     
     3. validation_video.avi:用于观察原视频小球轨迹与拟合图线之间的fit程度。

build:用来cmake的文件夹

代码的运行方式：

只需要用终端打开到build文件夹并运行生成程序：./videoCurveFit即可。

代码简要思路：
-------------------------------------------------------

1.对图片进行灰度化以及高斯滤波处理。

2.检测视频每一帧圆的位置与时间并储存起来。

3.计算残差函数。

4.通过ceres里的solver来最小化残差函数。

5.输出表征拟合程度的各项指标以及可视化拟合程度的视频。

拟合结果：
-----------------------------------------------------------------------------

可视化详见：output/validation_video.avi

拟合误差相关指标评估：
---------------
MAPE: 0.380979%（平均绝对百分误差）

RMSE: 1.64502 像素（均方根误差）

MAE:  1.46814 像素（平均绝对误差）

另外
---
运行main2.cpp的时候需修改CmakeText里面的函数名。

运行结果
---
详见result.md


